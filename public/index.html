<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>URL Shortener</title>
  <link rel="stylesheet" href="./index.css">
</head>
<body>
  <h1 id="title">Anonymous URL Shortener</h1>

  <form action="/shorten" id="shortenForm" method="POST">
    <input type="text" name="originalUrl" placeholder="Enter long URL" required>
    <button type="submit">Shorten</button>

    <p id="loginMessage" class="info-text">If you want to generate custom URL then <a href="/login">login</a>.</p>
  </form>

  <!-- Logout Button Container - initially hidden -->
  <form id="logoutForm" action="/logout" method="POST" style="display: none;">
    <button type="submit" class="logout-btn">Logout</button>
  </form>

  <script>
    function getSessionId() {
      const cookies = document.cookie.split(';');
      for (let cookie of cookies) {
        const [name, value] = cookie.trim().split('=');
        if (name === 'sessionId') return value;
      }
      return null;
    }

    const sessionId = getSessionId();
    console.log('Session ID:', sessionId);

    if (sessionId) {
      document.getElementById('title').textContent = 'Custom URL Shortener';

      const form = document.getElementById('shortenForm');
      const aliasInput = document.createElement('input');
      aliasInput.type = 'text';
      aliasInput.name = 'alias';
      aliasInput.placeholder = 'URL Alias';
      aliasInput.required = true;

      const submitButton = form.querySelector('button[type="submit"]');
      form.insertBefore(aliasInput, submitButton);

      // Show logout button
      document.getElementById('logoutForm').style.display = 'block';
      document.getElementById('loginMessage').style.display = 'none';
    }
  </script>
</body>
</html>
